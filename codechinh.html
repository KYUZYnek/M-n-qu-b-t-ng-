<!DOCTYPE html>
<html lang="vi">
<head>
  <!-- Audio l√†m n√∫t b·∫≠t/t·∫Øt -->
  <audio id="myaudio" src="nhacbg.mp3" loop></audio>
  <button id="audioBtn" style="
    position: fixed;
    top: 10px;
    left: 10px;
    padding: 10px 15px;
    background-color: rgb(255.255.255.0.5);
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    z-index: 9999;
    font-size: 18px;
    ">‚ñ∂Ô∏è</button>
  
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>T·∫∑ng n√®üò≥</title>
  <style>
    :root{
      --accent-pink: #ff6fb5;
      --glass: rgba(255,255,255,0.12);
      --glass-2: rgba(0,0,0,0.35);
    }
    html,body{height:100%;margin:0;font-family:Inter, system-ui, Arial;background:#111;color:#fff}
    body{background:center/cover no-repeat url("backgroundimg1.jpg");display:flex;align-items:center;justify-content:center;}
    .lock-wrap{width:360px;max-width:92vw;background:linear-gradient(180deg,rgba(0,0,0,0.35),rgba(0,0,0,0.55));border-radius:18px;padding:18px;box-shadow:0 12px 40px rgba(0,0,0,0.7);backdrop-filter:blur(6px);}
    .top-row{display:flex;align-items:center;gap:12px}
    .avatar{width:72px;height:72px;border-radius:12px;overflow:hidden;border:2px solid rgba(255,255,255,0.08);flex:0 0 72px;}
    .avatar img{width:100%;height:100%;object-fit:cover;display:block}
    .display{flex:1;height:56px;border-radius:10px;background:var(--glass);display:flex;align-items:center;padding:0 12px;font-size:22px;letter-spacing:6px;color:#fff;box-shadow:inset 0 -4px 10px rgba(0,0,0,0.35);overflow:hidden;}
    .keypad{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin-top:16px}
    .key{background:linear-gradient(180deg,#ffffff11,#00000033);height:64px;border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:22px;font-weight:700;color:#fff;cursor:pointer;user-select:none;box-shadow:0 6px 14px rgba(0,0,0,0.4);transition:transform .12s,background .12s;}
    .key:active{transform:scale(.97)}
    .key.action{background:linear-gradient(180deg,#ff6fb5,#ff2d8f);color:#fff}
    .modal-back{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,0.6);backdrop-filter:blur(3px);z-index:200;visibility:hidden;opacity:0;transition:opacity .2s}
    .modal{width:320px;background:linear-gradient(180deg,#0b0b0b,#111);padding:18px;border-radius:12px;text-align:center;box-shadow:0 10px 30px rgba(0,0,0,.6)}
    .modal.show{visibility:visible;opacity:1}
    .scene{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;z-index:100;pointer-events:none;opacity:0;transition:opacity .6s}
    .scene.active{opacity:1;pointer-events:auto}
    #countnum{font-family:"Courier New",monospace;font-size:220px;font-weight:900;color:#7cffb2;text-shadow:0 0 30px #7cffb2,0 0 60px rgba(0,255,150,0.08)}
    .rpg{position:fixed;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:300;pointer-events:none;background:rgba(0,0,0,1);}
    canvas#matrix{position:absolute;inset:0;width:100%;height:100%;display:block;z-index:1}
    .rpg-overlay{position:relative;z-index:2;display:flex;flex-direction:column;align-items:center;justify-content:center}
    
    /* subtext ch·ªâ c√≤n 1 h√†ng (ph·∫£i -> tr√°i) */
    .subtext{
      left:0;
      position:absolute;
      bottom:24px;
      white-space:nowrap;
      font-family:monospace;
      font-size:14px;
      color:rgba(255,255,255,0.9);
      z-index:4;
      animation:scroll-rtl 2s linear infinite;
    }
    @keyframes scroll-rtl{
      from{transform:translateX(100vw);}
      to{transform:translateX(-100%);}
    }

    .heart{font-size:140px;opacity:0;transform:scale(.2);transition:opacity .6s,transform .6s;z-index:4}
    .heart.show{opacity:1;transform:scale(1)}
    .date{margin-top:8px;font-size:36px;opacity:0;transform:translateY(8px);transition:opacity .6s .1s,transform .6s .1s;z-index:4}
    .date.show{opacity:1;transform:translateY(0)}
    .love{margin-top:12px;font-size:48px;opacity:0;transform:translateY(8px);transition:opacity .7s .3s,transform .7s .3s;z-index:4;color:#ff7fb3;text-shadow:0 6px 30px rgba(255,0,128,0.12)}
    .love.show{opacity:1;transform:translateY(0)}
    @media(max-width:420px){#countnum{font-size:130px}.heart{font-size:100px}}
    /* Popup b√°o sai m·∫≠t kh·∫©u */
    .error-back{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,0.5);z-index:400;visibility:hidden;opacity:0;transition:opacity .3s}
    .error-back.show{visibility:visible;opacity:1}
    .error-box{background:#222;padding:18px 24px;border-radius:12px;text-align:center;box-shadow:0 8px 20px rgba(0,0,0,0.6);font-size:18px;line-height:1.4}
  </style>
</head>
<body>
  <div class="lock-wrap" id="lockUI">
    <div class="top-row">
      <div class="avatar"><img src="avatar.jpg" alt="avatar"></div>
      <div class="display" id="passDisplay"></div>
    </div>
    <div class="keypad" aria-hidden="false">
      <div class="key" data-key="1">1</div>
      <div class="key" data-key="2">2</div>
      <div class="key" data-key="3">3</div>
      <div class="key" data-key="4">4</div>
      <div class="key" data-key="5">5</div>
      <div class="key" data-key="6">6</div>
      <div class="key" data-key="7">7</div>
      <div class="key" data-key="8">8</div>
      <div class="key" data-key="9">9</div>
      <div class="key" id="del">‚å´</div>
      <div class="key" data-key="0">0</div>
      <div class="key action" id="ok">‚úî</div>
    </div>
  </div>

  <div class="modal-back" id="modalBack">
    <div class="modal" id="modalBox">
      <h3 style="margin:6px 0 10px 0">M·∫≠t kh·∫©u ƒë√∫ng!</h3>
      <p style="margin:0 0 14px 0;color:#ccc">Chu·∫©n b·ªã ƒë√≥n b·∫•t ng·ªù n√®!!</p>
      <div style="dis<play></play>:flex;gap:10px;justify-content:center">
        <button id="modalOk" style="padding:10px 16px;border-radius:8px;border:none;background:#54f0a6;cursor:pointer">OK</button>
      </div>
    </div>
  </div>

  <!-- Th√¥ng b√°o sai m·∫≠t kh·∫©u -->
  <div class="error-back" id="errorBack">
    <div class="error-box">M·∫≠t kh·∫©u sai m·∫•t r·ªìi b√© c√≥ nh·ªõ k ƒë·∫•y ü•∞</div>
  </div>

  <div class="scene" id="countScene" aria-hidden="true">
    <div id="countnum">3</div>
  </div>

  <div class="rpg scene" id="rpgScene" aria-hidden="true">
    <canvas id="matrix"></canvas>
    <div class="rpg-overlay" role="presentation">
      <div class="heart" id="heart">‚ù§Ô∏è</div>
      <div class="date" id="dateText">13 - 09 - 2025</div>
      <div class="love" id="loveText">I Love You</div>
    </div>
    <!-- Subtext duy nh·∫•t -->
    <div class="subtext" id="subtext">I Love You üòò...I Love Youü•∞...I Love You üòä</div>
  </div>

<script>
  const correctPass = "25062010"; 
  const passDisplay = document.getElementById('passDisplay');
  const keys = document.querySelectorAll('.key[data-key]');
  const delBtn = document.getElementById('del');
  const okBtn = document.getElementById('ok');
  let entered = "";

  const keySound = new Audio("amthanh1.mp3");
  const countdownSound = new Audio("amthanh2.mp3");

  keys.forEach(k => k.addEventListener('click', () => {
    if (entered.length >= correctPass.length) return;
    entered += k.dataset.key;
    renderDots();
    keySound.currentTime = 0; 
    keySound.play();
  }));

  delBtn.addEventListener('click', () => {
    entered = entered.slice(0,-1);
    renderDots();
    keySound.currentTime = 0; 
    keySound.play();
  });
  okBtn.addEventListener('click', checkPass);

  function renderDots(){passDisplay.textContent = entered;}

  const modalBack = document.getElementById('modalBack');
  const modalOk = document.getElementById('modalOk');
  function openModal(){modalBack.style.visibility='visible';modalBack.style.opacity='1';modalBack.classList.add('show');}
  function closeModal(){modalBack.style.opacity='0';modalBack.style.visibility='hidden';}

  const errorBack = document.getElementById('errorBack');
  function showError(){
    errorBack.classList.add('show');
    setTimeout(()=>errorBack.classList.remove('show'),3000);
  }

  function checkPass(){
    if (entered===correctPass){
      openModal();
    } else {
      showError();
      entered="";
      renderDots();
    }
  }
  modalOk.addEventListener('click',()=>{closeModal();startCountdown();});

  const countScene=document.getElementById('countScene');
  const countnum=document.getElementById('countnum');
  const rpgScene=document.getElementById('rpgScene');

  function startCountdown(){
    countScene.classList.add('active');
    let n=3;countnum.textContent=n;
    const t=setInterval(()=>{
      n--;
      if(n>0){
        countnum.style.transform='scale(1.05)';
        setTimeout(()=>countnum.style.transform='scale(1)',120);
        countnum.textContent=n;
        countdownSound.currentTime=0;
        countdownSound.play();
      }else{
        clearInterval(t);
        countScene.classList.remove('active');
        setTimeout(()=>showRPGScene(),300);
      }
    },1000);
  }

  // Matrix + RPG
  const canvas=document.getElementById('matrix');const ctx=canvas.getContext('2d');
  let W=canvas.width=window.innerWidth;let H=canvas.height=window.innerHeight;
  const fontSize=Math.max(12,Math.floor(W/100));const cols=Math.floor(W/fontSize);
  const drops=new Array(cols).fill(0);const chars="01@#$%&*ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";
  let hue=0;function resize(){W=canvas.width=window.innerWidth;H=canvas.height=window.innerHeight;}
  window.addEventListener('resize',resize);
  function drawMatrix(){ctx.fillStyle="rgba(0,0,0,0.08)";ctx.fillRect(0,0,W,H);ctx.font=fontSize+"px monospace";
    for(let i=0;i<drops.length;i++){const text=chars.charAt(Math.floor(Math.random()*chars.length));const color=`hsl(${(hue+i*6)%360},90%,55%)`;
      ctx.fillStyle=color;ctx.fillText(text,i*fontSize,drops[i]*fontSize);if(drops[i]*fontSize>H&&Math.random()>0.975)drops[i]=0;drops[i]++;}
    hue=(hue+0.6)%360;}
  let matrixInterval;function startMatrix(){for(let i=0;i<drops.length;i++)drops[i]=Math.floor(Math.random()*H/fontSize);matrixInterval=setInterval(drawMatrix,35);}
  function showRPGScene(){
    rpgScene.classList.add('active');startMatrix();
    const heart=document.getElementById('heart');const dateText=document.getElementById('dateText');const loveText=document.getElementById('loveText');
    setTimeout(()=>{heart.classList.add('show');heart.animate([{transform:'scale(0.6)',filter:'blur(2px)'},{transform:'scale(1.06)',filter:'blur(0px)'},{transform:'scale(1)',filter:'blur(0px)'}],{duration:700,easing:'ease-out'});},700);
    setTimeout(()=>dateText.classList.add('show'),2000);
    setTimeout(()=>loveText.classList.add('show'),3200);
  }
  renderDots();
  document.addEventListener('keydown',(e)=>{if(e.key>='0'&&e.key<='9'){if(entered.length<correctPass.length)entered+=e.key;renderDots();keySound.currentTime=0;keySound.play();}
    else if(e.key==='Backspace'){entered=entered.slice(0,-1);renderDots();keySound.currentTime=0;keySound.play();}
    else if(e.key==='Enter'){checkPass();}});
    const btn = document.getElementById('audioBtn');
const audio = document.getElementById('myaudio');
let isPlaying = false;

btn.addEventListener('click', () => {
    if (!isPlaying) {
        audio.play();
        btn.textContent = "‚è∏Ô∏è";
        isPlaying = true;
    } else {
        audio.pause();
        btn.textContent = "‚ñ∂Ô∏è";
        isPlaying = false;
    }
});
</script>
</body>
</html> 